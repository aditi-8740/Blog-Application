<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/head') %>
    <title></title>
</head>
<body>
    <%- include('./partials/navbar') %>
    <div class="container mt-4">
        <h1><%= blog.title %></h1>
        <img src="<%= blog.coverImageURL %>" alt="img" width="300px">
        <p class="mt-4"> <%= blog.body %> </p>
    </div>

    <div class="container mt-4">
        <img src="<%= blog.createdBy.profileImgURL %>" width="50px"> <%= blog.createdBy.fullname %>
    </div>
    



    <% if (locals.user) { %>        <!-- *** locals use nahi karte, simple 'user' use karenge yaha ,then if user send nahi hua then error aayega.. so using this locals.user, as eisme ERROR nahi aayega.. EJS hamu ek locals OBJECT deti ha,jisme saare variables hote haa..-->
        <div class="container mt-3">                <!--Concole.log(locals)-->
            <form action="/blog/comment/<%= blog._id %>" method="post">
                <h2>Comment (<%= comments.length %>)</h2>
                <div class="mb-3">
                    <input name="content" class="form-control" id="comment" placeholder="Enter your comment">
                </div>
                <button type="submit" class="btn btn-primary mb-4">Comment</button>
            </form>
        </div>
    <% } %>

    <div class="container mt-3">
        <% comments.forEach(comment => { %>
            <div>
                <img src="<%= blog.createdBy.profileImgURL %>" width="20px"> <%= comment.createdBy.fullname %>
                <pre><%= comment.content %></pre>
            </div>
        <% }) %>


    <%- include('./partials/scripts') %>
</body>
</html>